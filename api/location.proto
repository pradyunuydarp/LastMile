syntax = "proto3";

package location;

option go_package = "lastmile/gen/go/location";

message Location {
    string driver_id = 1;
    double latitude = 2;
    double longitude = 3;
}

message UpdateLocationRequest {
    Location location = 1;
}

message UpdateLocationResponse {
    bool success = 1;
}

message GetDriverLocationsRequest {
    repeated string driver_ids = 1;
}

message GetDriverLocationsResponse {
    repeated Location locations = 1;
}

service LocationService {
    rpc UpdateLocation(stream UpdateLocationRequest) returns (UpdateLocationResponse);
    rpc SubscribeLocationUpdates(SubscribeLocationRequest) returns (stream LocationUpdate);
    rpc GetDriverLocations(GetDriverLocationsRequest) returns (GetDriverLocationsResponse);
}

message SubscribeLocationRequest {
    string driver_id = 1;
}

message LocationUpdate {
    string driver_id = 1;
    double latitude = 2;
    double longitude = 3;
}
